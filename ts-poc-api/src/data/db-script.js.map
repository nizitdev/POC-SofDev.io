{"version":3,"file":"db-script.js","sourceRoot":"","sources":["db-script.ts"],"names":[],"mappings":"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","sourcesContent":["import { KnexPgDb } from \"@nivinjoseph/n-data\";\r\nimport { DefaultDbConnectionFactory } from \"./factories/default-db-connection-factory\";\r\n\r\n\r\nconst db = new KnexPgDb(new DefaultDbConnectionFactory());\r\n\r\nconst sql = `\r\n    create table todos\r\n    (\r\n        id varchar (48) primary key,\r\n        version int not null,\r\n        created_at bigint not null,\r\n        updated_at bigint not null,\r\n        data jsonb not null\r\n    );\r\n    `;\r\n\r\n    const sql1 = `\r\n    create table s_class\r\n    (\r\n        id varchar(48) primary key,\r\n        name varchar(48) not null\r\n    );\r\n    `;\r\n    const sql2 = `\r\n    create table s_user\r\n    (\r\n        id varchar(48) primary key,\r\n        name varchar(48) not null,\r\n        qualification varchar(48) not null,\r\n        isActive int not null,\r\n        isAdmin int not null,\r\n        userName varchar(48) not null,\r\n        password varchar(48) not null,\r\n        classInCharge varchar(48) not null\r\n    );\r\n    `;\r\n    const sql3 = `\r\n    create table s_subject\r\n    (\r\n        id varchar(48) primary key,\r\n        name varchar(48) not null \r\n    );\r\n    `;\r\n    const sql4 = `\r\n    create table s_qualification(\r\n        id varchar(48) primary key,\r\n        name varchar(48) not null \r\n    );\r\n    `;\r\n    \r\n    const sql5 = `insert into s_class \r\n    (id,name) \r\n    values(?, ?);`;\r\n\r\n    const params = [1, \"X A\" ];\r\n\r\n    \r\n \r\ndb.executeCommand(sql)\r\n    .then(() =>\r\n    {\r\n        console.log(\"DB created!!\");\r\n        \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"DB creation failed!!\", e);\r\n         \r\n    });\r\n    \r\nconst db1 = new KnexPgDb(new DefaultDbConnectionFactory());\r\n\r\ndb1.executeCommand(sql1)\r\n    .then(() =>\r\n    {\r\n        console.log(\"s_class created!!\");\r\n         \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"s_class failed!!\", e);\r\n         \r\n    });\r\n    \r\nconst db2 = new KnexPgDb(new DefaultDbConnectionFactory());\r\n\r\n    db2.executeCommand(sql2)\r\n    .then(() =>\r\n    {\r\n        console.log(\"s_user created!!\");\r\n        \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"s_user creation failed!!\", e);\r\n        \r\n    });\r\n    \r\nconst db3 = new KnexPgDb(new DefaultDbConnectionFactory());\r\n\r\n    db3.executeCommand(sql3)\r\n    .then(() =>\r\n    {\r\n        console.log(\"sub created!!\");\r\n       \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"sub creation failed!!\", e);\r\n        \r\n    });\r\n    \r\nconst db4 = new KnexPgDb(new DefaultDbConnectionFactory());\r\n\r\n    db4.executeCommand(sql4)\r\n    .then(() =>\r\n    {\r\n        console.log(\"quali created!!\");\r\n      \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"quali creation failed!!\", e);\r\n         \r\n    });\r\n    \r\n\r\ndb.executeCommand(sql5, ...params)\r\n    .then(() =>\r\n    {\r\n        console.log(\"insert created!!\");\r\n        \r\n    })\r\n    .catch((e) =>\r\n    {\r\n        console.log(\"insert creation failed!!\", e);\r\n        process.exit(1);\r\n    });"]}