{"version":3,"file":"manage-todo-view-model.js","sourceRoot":"","sources":["manage-todo-view-model.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,8CAAuF;AACvF,oCAAoC;AACpC,mCAAiC;AACjC,gDAA6C;AAE7C,0DAAiD;AAMjD,IAAa,mBAAmB,GAAhC,MAAa,mBAAoB,SAAQ,qBAAa;IAmBlD,YAAmB,WAAwB,EAAE,iBAAoC;QAE7E,KAAK,EAAE,CAAC;QACR,mBAAK,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QACpE,mBAAK,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QAEhF,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;QAC5C,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IAC3B,CAAC;IArBD,IAAW,SAAS,KAAa,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAE1D,IAAW,KAAK,KAAa,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAClD,IAAW,KAAK,CAAC,KAAa,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;IAExD,IAAW,WAAW,KAAa,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;IAC9D,IAAW,WAAW,CAAC,KAAa,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC;IAkB7D,IAAI;QAEP,MAAM,WAAW,GAAiB,IAAI,CAAC,GAAG;YACtC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC;YACxE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAEnE,WAAW;aACN,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aAClE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACpC,CAAC;IAGS,OAAO,CAAC,EAAW;QAEzB,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,mBAAmB,EAAE,EACnC;YACI,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;YAE3B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC;iBACxB,IAAI,CAAC,CAAC,CAAC,EAAE;gBAEN,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;gBAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC;gBACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,WAAW,CAAC;YACtC,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACnC;aAED;YACI,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;SAC3B;IACL,CAAC;CACJ,CAAA;AAlEY,mBAAmB;IAH/B,gBAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;IAC5C,aAAK,CAAC,MAAM,CAAC,UAAU,CAAC;IACxB,eAAM,CAAC,aAAa,EAAE,mBAAmB,CAAC;;GAC9B,mBAAmB,CAkE/B;AAlEY,kDAAmB","sourcesContent":["import { PageViewModel, template, route, NavigationService } from \"@nivinjoseph/n-app\";\r\nimport * as Routes from \"../routes\";\r\nimport \"./manage-todo-view.scss\";\r\nimport { inject } from \"@nivinjoseph/n-ject\";\r\nimport { TodoService } from \"../../services/todo/todo-service\";\r\nimport { given } from \"@nivinjoseph/n-defensive\";\r\n\r\n\r\n@template(require(\"./manage-todo-view.html\"))\r\n@route(Routes.manageTodo)\r\n@inject(\"TodoService\", \"NavigationService\")\r\nexport class ManageTodoViewModel extends PageViewModel\r\n{\r\n    private readonly _todoService: TodoService;\r\n    private readonly _navigationService: NavigationService;\r\n    private _operation: string;\r\n    private _id: string | null;\r\n    private _title: string;\r\n    private _description: string;\r\n\r\n    \r\n    public get operation(): string { return this._operation; }\r\n\r\n    public get title(): string { return this._title; }\r\n    public set title(value: string) { this._title = value; }\r\n\r\n    public get description(): string { return this._description; }\r\n    public set description(value: string) { this._description = value; }\r\n\r\n\r\n    public constructor(todoService: TodoService, navigationService: NavigationService)\r\n    {\r\n        super();\r\n        given(todoService, \"todoService\").ensureHasValue().ensureIsObject();\r\n        given(navigationService, \"navigationService\").ensureHasValue().ensureIsObject();\r\n        \r\n        this._todoService = todoService;\r\n        this._navigationService = navigationService;\r\n        this._operation = \"\";\r\n        this._id = null; \r\n        this._title = \"\";\r\n        this._description = \"\";\r\n    }\r\n\r\n\r\n    public save(): void\r\n    {\r\n        const savePromise: Promise<any> = this._id\r\n            ? this._todoService.updateTodo(this._id, this._title, this._description)\r\n            : this._todoService.createTodo(this._title, this._description);\r\n        \r\n        savePromise\r\n            .then(() => this._navigationService.navigate(Routes.listTodos, {}))\r\n            .catch(e => console.log(e));\r\n    }\r\n    \r\n    \r\n    protected onEnter(id?: string): void\r\n    {\r\n        if (id && !id.isEmptyOrWhiteSpace())\r\n        {\r\n            this._operation = \"Update\";\r\n            \r\n            this._todoService.getTodo(id)\r\n                .then(t =>\r\n                {\r\n                    this._id = t.id;\r\n                    this._title = t.title;\r\n                    this._description = t.description;\r\n                })\r\n                .catch(e => console.log(e));\r\n        }\r\n        else\r\n        {\r\n            this._operation = \"Add\";\r\n        }\r\n    }\r\n}"]}