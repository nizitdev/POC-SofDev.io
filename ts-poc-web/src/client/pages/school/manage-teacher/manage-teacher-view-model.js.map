{"version":3,"file":"manage-teacher-view-model.js","sourceRoot":"","sources":["manage-teacher-view-model.ts"],"names":[],"mappings":"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","sourcesContent":["import { PageViewModel, template, route, NavigationService } from \"@nivinjoseph/n-app\";\r\nimport * as Routes from \"../../routes\";\r\nimport \"./manage-teacher-view.scss\";\r\nimport { inject } from \"@nivinjoseph/n-ject\";\r\nimport { TeacherService } from \"../../../services/school/teacher/teacher-service\";\r\nimport { given } from \"@nivinjoseph/n-defensive\";\r\n\r\n\r\n@template(require(\"./manage-teacher-view.html\"))\r\n@route(Routes.manageTeacher)\r\n@inject(\"TeacherService\", \"NavigationService\")\r\nexport class ManageTeacherViewModel extends PageViewModel\r\n{\r\n    private readonly _teacherService: TeacherService;\r\n    private readonly _navigationService: NavigationService;\r\n    private _operation: string;\r\n    private _id: string | null;\r\n    private _firstName: string;\r\n    private _lastName: string;\r\n    private _address: string;\r\n    private _sex: string;\r\n    private _dateOfBirth: string;\r\n    \r\n    public get operation(): string { return this._operation; }\r\n\r\n    public get firstName(): string { return this._firstName; }\r\n    public set firstName(value: string) { this._firstName = value; }\r\n\r\n    public get lastName(): string { return this._lastName; }\r\n    public set lastName(value: string) { this._lastName = value; }\r\n\r\n    public get  sex(): string { return this._sex; }\r\n    public set  sex(value: string) { this._sex = value; }\r\n\r\n    public get  dateOfBirth(): string { return this._dateOfBirth; }\r\n    public set  dateOfBirth(value: string) { this._dateOfBirth = value; }\r\n\r\n\r\n    public get   address(): string { return this._address; }\r\n    public set  address(value: string) { this._address = value; }\r\n\r\n    public constructor(teacherService: TeacherService, navigationService: NavigationService)\r\n    {\r\n        super();\r\n        given( teacherService, \" teacherService\").ensureHasValue().ensureIsObject();\r\n        given(navigationService, \"navigationService\").ensureHasValue().ensureIsObject();\r\n        \r\n        this._teacherService =  teacherService;\r\n        this._navigationService = navigationService;\r\n        this._operation = \"\";\r\n        this._id = null; \r\n        this._firstName = \"\";\r\n        this._lastName = \"\";\r\n        this._sex = \"\";\r\n        this._address = \"\";\r\n        this._dateOfBirth = \"\";\r\n\r\n    } \r\n    \r\n\r\n    public save(): void\r\n    {\r\n        debugger;\r\n        const savePromise: Promise<any> = this._id\r\n        ? this._teacherService.updateTeacher(this._id, this._firstName, this._lastName, this._dateOfBirth, this._sex, this._address)\r\n            : this._teacherService.createTeacher(this._firstName, this._lastName, this._dateOfBirth, this._sex, this._address);\r\n        \r\n        savePromise\r\n            .then(() => this._navigationService.navigate(Routes.listTeachers, {}))\r\n            .catch(e => console.log(e));\r\n    }\r\n    \r\n    \r\n    protected onEnter(id?: string): void\r\n    {\r\n        if (id && !id.isEmptyOrWhiteSpace())\r\n        {\r\n            this._operation = \"Update\";\r\n            \r\n            this._teacherService.getTeacher(id)\r\n                .then(t =>\r\n                {\r\n                    this._id = t.id;\r\n                    this._firstName = t.firstName;\r\n                    this._lastName = t.lastName;\r\n                    this._address = t.address;\r\n                    this._sex = t.sex;\r\n                    this._dateOfBirth = t.dateOfBirth;\r\n                })\r\n                .catch(e => console.log(e));\r\n        }\r\n        else\r\n        {\r\n            this._operation = \"Add\";\r\n        }\r\n    }\r\n}"]}