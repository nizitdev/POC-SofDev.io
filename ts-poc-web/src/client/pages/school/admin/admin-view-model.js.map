{"version":3,"file":"admin-view-model.js","sourceRoot":"","sources":["admin-view-model.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,8CAAuF;AAEvF,oCAAkC;AAClC,uCAAuC;AAGvC,0DAAiD;AACjD,gDAA6C;AAM7C,IAAa,kBAAkB,GAA/B,MAAa,kBAAmB,SAAQ,qBAAa;IAajD,YAAmB,YAA0B,EAAE,iBAAoC;QAC/E,KAAK,EAAE,CAAC;QACR,mBAAK,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QAEhF,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;QAC5C,mBAAK,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QACtE,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;IAEtC,CAAC;IAdD,IAAW,QAAQ,KAAa,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IACxD,IAAW,QAAQ,CAAC,KAAa,IAAI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC;IAC9D,IAAW,QAAQ,KAAa,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IACxD,IAAW,QAAQ,CAAC,KAAa,IAAI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC;IAE9D,IAAW,IAAI,KAAW,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAYvC,KAAK;QACR,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC;aACjD,IAAI,CAAC,UAAU,MAAM;YAClB,IAAI,MAAM,CAAC,OAAO,KAAK,IAAI,EAAE;gBACzB,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;aAC7D;iBACI;gBAED,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;aAC7D;QACL,CAAC,EAAE,UAAU,CAAC;YAEV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IAGX,CAAC;CACJ,CAAA;AA1CY,kBAAkB;IAJ9B,gBAAQ,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC;IAC7C,aAAK,CAAC,MAAM,CAAC,SAAS,CAAC;IAEvB,eAAM,CAAC,cAAc,EAAE,mBAAmB,CAAC;;GAC/B,kBAAkB,CA0C9B;AA1CY,gDAAkB","sourcesContent":["import { PageViewModel, template, route, NavigationService } from \"@nivinjoseph/n-app\";\r\n\r\nimport \"../admin/admin-view.scss\";\r\nimport * as Routes from \"../../routes\";\r\nimport { AdminService } from \"../../../services/school/admin/admin-service\";\r\nimport { User } from \"../../../models/school/user\";\r\nimport { given } from \"@nivinjoseph/n-defensive\";\r\nimport { inject } from \"@nivinjoseph/n-ject\";\r\n\r\n@template(require(\"../admin/admin-view.html\"))\r\n@route(Routes.adminPage)\r\n// @inject(\"\")    \r\n@inject(\"AdminService\", \"NavigationService\")\r\nexport class ListAdminViewModel extends PageViewModel {\r\n\r\n    private _userName: string;\r\n    private _password: string;\r\n    private readonly _adminService: AdminService;\r\n    private readonly _navigationService: NavigationService;\r\n    private _user: User;\r\n    public get userName(): string { return this._userName; }\r\n    public set userName(value: string) { this._userName = value; }\r\n    public get password(): string { return this._password; }\r\n    public set password(value: string) { this._password = value; }\r\n\r\n    public get user(): User { return this._user; }\r\n    public constructor(adminService: AdminService, navigationService: NavigationService) {\r\n        super();\r\n        given(navigationService, \"navigationService\").ensureHasValue().ensureIsObject();\r\n\r\n        this._navigationService = navigationService;\r\n        given(adminService, \"adminService\").ensureHasValue().ensureIsObject();\r\n        this._adminService = adminService;\r\n\r\n    }\r\n\r\n\r\n    public login(): void {\r\n        let that = this;\r\n        this._adminService.login(this.userName, this.password)\r\n            .then(function (result) {\r\n                if (result.isAdmin === true) {\r\n                    that._navigationService.navigate(Routes.listTeachers, {});\r\n                }\r\n                else {\r\n\r\n                    that._navigationService.navigate(Routes.listStudents, {});\r\n                }\r\n            }, function (e) {\r\n                // handle errors here\r\n                console.log(e);\r\n            });\r\n\r\n\r\n    }\r\n}"]}