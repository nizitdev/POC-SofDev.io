{"version":3,"file":"manage-studentMarkEntry-view-model.js","sourceRoot":"","sources":["manage-studentMarkEntry-view-model.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,8CAAuF;AACvF,uCAAuC;AACvC,+CAA6C;AAC7C,gDAA6C;AAE7C,0DAAiD;AAQjD,IAAa,0BAA0B,GAAvC,MAAa,0BAA2B,SAAQ,qBAAa;IA+BzD,YAAmB,cAA8B,EAAE,iBAAoC;QACnF,KAAK,EAAE,CAAC;QAER,mBAAK,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QAC1E,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;QACtC,mBAAK,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,CAAC,cAAc,EAAE,CAAC,cAAc,EAAE,CAAC;QAEhF,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;QACd,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IAC1B,CAAC;IAxCD,IAAW,gBAAgB,KAAsC,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAEjG,IAAW,QAAQ,KAA6B,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IASxE,IAAW,SAAS,KAAa,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAE1D,IAAW,WAAW,KAAa,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;IAC9D,IAAW,WAAW,CAAC,KAAa,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC;IAEpE,IAAW,OAAO,KAAa,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IACtD,IAAW,OAAO,CAAC,KAAa,IAAI,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC;IAE5D,IAAW,IAAI,KAAa,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAChD,IAAW,IAAI,CAAC,KAAa,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;IAEtD,IAAW,UAAU,KAAa,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IAC5D,IAAW,UAAU,CAAC,KAAa,IAAI,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC;IAmB3D,IAAI;QAEP,QAAQ,CAAC;QACT,MAAM,WAAW,GAAiB,IAAI,CAAC,GAAG;YACtC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC;YACvH,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAElH,WAAW;aACV,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC;aAC3D,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;aACrC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE3B,QAAQ,CAAC;IACnB,CAAC;IAGS,OAAO,CAAC,EAAW;QACjC,QAAQ,CAAC;QACD,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE;aACjC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;aAC7B,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,QAAQ,CAAC;QACT,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,EAAE,CAAC;aAClC,IAAI,CAAC,CAAC,CAAC,EAAE;YACN,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;gBACvB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,IAAI,CAAC;QAE/B,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAE5B,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,EAAE,CAAC;aAClC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;aACrC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAqBhC,CAAC;CAEJ,CAAA;AAvGY,0BAA0B;IAHtC,gBAAQ,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC;IACxD,aAAK,CAAC,MAAM,CAAC,iBAAiB,CAAC;IAC/B,eAAM,CAAC,gBAAgB,EAAE,mBAAmB,CAAC;;GACjC,0BAA0B,CAuGtC;AAvGY,gEAA0B","sourcesContent":["import { template, route, PageViewModel, NavigationService } from \"@nivinjoseph/n-app\";\r\nimport * as Routes from \"../../routes\";\r\nimport \"./manage-studentMarkEntry-view.scss\";\r\nimport { inject } from \"@nivinjoseph/n-ject\";\r\nimport { StudentService } from \"../../../services/school/student/student-service\";\r\nimport { given } from \"@nivinjoseph/n-defensive\";\r\nimport { StudentMarkEntry } from \"../../../models/school/studentMarkEntry\";\r\nimport { Subject } from \"../../../models/school/subject\";\r\n\r\n\r\n@template(require(\"./manage-studentMarkEntry-view.html\"))\r\n@route(Routes.manageStudentMark)\r\n@inject(\"StudentService\", \"NavigationService\")\r\nexport class ManageStudentMarkViewModel extends PageViewModel {\r\n\r\n    private readonly _studentService: StudentService;\r\n   // private readonly _navigationService: NavigationService;\r\n    private _studentMarkEntry: ReadonlyArray<StudentMarkEntry>;\r\n    public get studentMarkEntry(): ReadonlyArray<StudentMarkEntry> { return this._studentMarkEntry; }\r\n    private _subjects: ReadonlyArray<Subject>;\r\n    public get subjects(): ReadonlyArray<Subject> { return this._subjects; }\r\n\r\n    private _operation: string;\r\n    private _id: string;\r\n    private _studentName: string;\r\n    private _subject: string;\r\n    private _mark: string;\r\n    private _student_id: string;\r\n\r\n    public get operation(): string { return this._operation; }\r\n\r\n    public get studentName(): string { return this._studentName; }\r\n    public set studentName(value: string) { this._studentName = value; }\r\n\r\n    public get subject(): string { return this._subject; }\r\n    public set subject(value: string) { this._subject = value; }\r\n\r\n    public get mark(): string { return this._mark; }\r\n    public set mark(value: string) { this._mark = value; }\r\n\r\n    public get student_id(): string { return this._student_id; }\r\n    public set student_id(value: string) { this._student_id = value; }\r\n\r\n\r\n    public constructor(studentService: StudentService, navigationService: NavigationService) {\r\n        super();\r\n\r\n        given(studentService, \"studentService\").ensureHasValue().ensureIsObject();\r\n        this._studentService = studentService;\r\n        given(navigationService, \"navigationService\").ensureHasValue().ensureIsObject();\r\n       // this._navigationService = navigationService;\r\n        this._subjects = [];\r\n        this._studentMarkEntry = [];\r\n        this._id = \"\";\r\n        this._studentName = \"\";\r\n        this._subject = \"\";\r\n        this._mark = \"\";\r\n        this._student_id = \"\";\r\n    }\r\n\r\n    public save(): void {\r\n\r\n        debugger;\r\n        const savePromise: Promise<any> = this._id\r\n            ? this._studentService.updateStudentMarkEntry(this._id, this._studentName, this._subject, this._mark, this._student_id)\r\n            : this._studentService.createStudentMarkEntry(this._student_id, this._studentName, this._subject, this._mark);\r\n\r\n        savePromise\r\n        .then(() => this._studentService.getStudentMark(this.student_id)\r\n            .then(t => this._studentMarkEntry = t)\r\n            .catch(e => console.log(e)));\r\n       // .then(() => this._navigationService.navigate(Routes.manageStudentMark, {id: this._student_id})) .catch(e => console.log(e));\r\n              debugger;\r\n    }\r\n\r\n\r\n    protected onEnter(id?: string): void {\r\ndebugger;\r\n        this._studentService.getSubjects()\r\n        .then(t => this._subjects = t)\r\n        .catch(e => console.log(e));\r\n        debugger;\r\n        this._studentService.getStudent(id)\r\n        .then(t => {\r\n            this._student_id = t.id,\r\n            this._studentName = t.name;\r\n             \r\n        })\r\n        .catch(e => console.log(e));\r\n         \r\n        this._studentService.getStudentMark(id)\r\n            .then(t => this._studentMarkEntry = t)\r\n            .catch(e => console.log(e));\r\n            this._operation = \"Add\";\r\n        // if (markId && !markId.isEmptyOrWhiteSpace() ) {\r\n           \r\n        //     // this._operation = \"Update\";\r\n\r\n        //     // this._studentService.getStudentMarkEntry(markId)\r\n        //     //     .then(t => {\r\n        //     //         this._id = t.id;\r\n        //     //         this._student_id = id;\r\n        //     //         this._mark = t.mark;\r\n        //     //         this._studentName = t.studentName;\r\n        //     //         this._subject = t.subject;\r\n\r\n        //     //     })\r\n        //     //     .catch(e => console.log(e));\r\n\r\n        // }\r\n        // else {\r\n        //     debugger;\r\n           \r\n        // }\r\n    }\r\n\r\n}\r\n"]}